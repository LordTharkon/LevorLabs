<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Love Letters</title>
    
    <link rel="icon" type="image/svg+xml" href="icon.svg">

    <link rel="apple-touch-icon" href="icon.png">

    <meta name="theme-color" content="#f8f5f2">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="script.js" defer></script>
</head>
<body>

<nav>
    <div style="display:flex; gap:10px;">
        <button class="icon-btn" onclick="toggleArchive()" title="Past Games">ğŸ“…</button>
        <button class="icon-btn" onclick="toggleLeaderboard()" title="Leaderboard">ğŸ†</button>
    </div>

    <div class="nav-center">
        <div class="mode-switch-container">
            <span class="mode-label">Hard Mode</span>
            <label class="switch">
                <input type="checkbox" id="modeToggle" onchange="toggleMode()">
                <span class="slider round"></span>
            </label>
        </div>

        <div class="title" id="gameTitle">Love Letters</div>
        
        <div class="date-controls">
            <button class="arrow-btn" id="prevBtn" onclick="changeDate(-1)">&#9664;</button>
            <div class="date-display" id="currentDateDisplay">Loading...</div>
            <button class="arrow-btn" id="nextBtn" onclick="changeDate(1)">&#9654;</button>
        </div>
    </div>

    <div id="authContainer"></div>
</nav>

<div id="leaderboardModal" class="modal">
    <h2>ğŸ† Leaderboard</h2>
    
    <div class="table-container">
        <table id="leaderboardTable">
            <thead>
    <tr>
        <th>Rank</th>
        <th>Name</th>
        <th>Wins</th>
        <th>Avg. Guesses</th> </tr>
</thead>
            <tbody>
                <tr><td colspan="4">Loading...</td></tr>
            </tbody>
        </table>
    </div>

    <button class="btn-secondary" onclick="toggleLeaderboard()">Close</button>
</div>

    <div class="game-board" id="board">
        </div>

    <div class="keyboard" id="keyboard">
        </div>

<div id="profileModal" class="modal">
    <h2>Edit Profile ğŸ‘¤</h2>
    <p>Change how your name appears on the leaderboard.</p>
    
    <input type="text" id="profileNameInput" placeholder="Enter display name" maxlength="15">
    
    <div style="display:flex; gap:10px; margin-top:20px; width: 100%; justify-content: center;">
        <button class="btn-primary" onclick="saveName()">Save Name</button>
        <button class="btn-secondary" onclick="logout()" style="background-color: #e74c3c; color: white;">Logout</button>
    </div>

    <button class="btn-secondary" onclick="document.getElementById('profileModal').classList.remove('open')">Close</button>
</div>

    <div id="loginModal" class="modal open">
        <h2>Welcome, Babe! â¤ï¸</h2>
        <p>Sign in to save your scores.</p>
        <button class="btn-primary" onclick="loginGoogle()">Sign in with Google</button>
        <p class="subtext">Or just play for fun</p>
        <button class="btn-secondary" onclick="document.getElementById('loginModal').classList.remove('open')">Play as Guest</button>
    </div>

    <div id="archiveModal" class="modal">
        <h2>Past Love Letters</h2>
        <p>Pick a date to play that puzzle:</p>
        <input type="date" id="datePicker">
        <button class="btn-primary" onclick="loadArchivedDate()">Go</button>
        <button class="btn-secondary" onclick="toggleArchive()">Close</button>
    </div>

    <div id="toast" class="toast">Message</div>

</body>
</html>